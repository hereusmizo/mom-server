(this["webpackJsonpmom-admin"]=this["webpackJsonpmom-admin"]||[]).push([[23],{423:function(e,t,a){"use strict";t.a="https://missionorganicmizoram.com/"},449:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(12);t.a=Object(l.a)(r.a.createElement("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}),"AddAPhoto")},484:function(e,t,a){"use strict";a.r(t);var n=a(421),r=a(37),l=a(16),c=a.n(l),o=a(35),i=a(24),u=a(0),s=a.n(u),m=a(434),d=a(435),p=a(436),b=a(437),f=a(438),h=a(70),g=a(412),y=a(413),v=a(414),E=a(503),O=a(409),j=a(408),w=a(401),x=a(404),C=a(426),k=a(427),S=a(42),I=a(429),z=a.n(I),D=a(17),N=a(449),T=a(431),A=a(480),W=a(428),B=a(90),R=a(89),F=a(58),H=a(423),M=a(36);t.default=Object(S.b)(null,{logout:M.f})(Object(D.g)((function(e){var t=e.logout,a=e.history,l=Object(u.useState)({id:"",title:"",body:"",photo:"",created:""}),S=Object(i.a)(l,2),I=S[0],D=S[1],M=Object(u.useState)(!1),V=Object(i.a)(M,2),Y=V[0],P=V[1],U=Object(u.useState)(!1),q=Object(i.a)(U,2),L=q[0],J=q[1],G=Object(u.useState)(!1),K=Object(i.a)(G,2),Q=K[0],X=K[1],Z=Object(u.useState)(!1),$=Object(i.a)(Z,2),_=$[0],ee=$[1],te=Object(u.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],le=Object(u.useState)(null),ce=Object(i.a)(le,2),oe=ce[0],ie=ce[1],ue=Object(u.useState)(null),se=Object(i.a)(ue,2),me=se[0],de=se[1],pe=Object(u.useState)([]),be=Object(i.a)(pe,2),fe=be[0],he=be[1];Object(u.useEffect)((function(){document.title="News",ge()}),[]);var ge=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/news");case 3:return t=e.sent,e.abrupt("return",he(t.data.data));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(o.a)(c.a.mark((function e(a){var l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!localStorage.getItem("mom-admin")){e.next=28;break}return e.prev=2,P(!0),(l=new FormData).append("title",I.title),l.append("body",I.body),I.photo?l.append("image",I.photo,I.photo.name):l.append("image",null),e.next=10,F.a.post("/api/news",l,{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 10:return o=e.sent,he([].concat(Object(r.a)(fe),[Object(n.a)(Object(n.a)({},I),{},{id:o.data.id,photo:o.data.image,created:new Date})])),D({id:"",title:"",body:"",photo:"",created:""}),de(B.a[700]),ie("News Published Successfully"),P(!1),J(!1),e.abrupt("return",re(!0));case 20:return e.prev=20,e.t0=e.catch(2),P(!1),de(R.a[700]),ie("Something went wrong"),e.abrupt("return",re(!0));case 26:e.next=29;break;case 28:return e.abrupt("return",t());case 29:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!localStorage.getItem("mom-admin")){e.next=23;break}return e.prev=2,P(!0),e.next=6,F.a.patch("/api/news/".concat(I.id),I,{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 6:return he(fe.map((function(e){return e.id===I.id?I:e}))),D({id:"",title:"",body:"",photo:"",created:""}),ee(!1),de(B.a[700]),ie("News Updated Successfully"),P(!1),e.abrupt("return",re(!0));case 15:return e.prev=15,e.t0=e.catch(2),P(!1),de(R.a[700]),ie("Something went wrong"),e.abrupt("return",re(!0));case 21:e.next=24;break;case 23:return e.abrupt("return",t());case 24:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-admin")){e.next=22;break}return e.prev=1,P(!0),e.next=5,F.a.delete("/api/news/".concat(I.id),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 5:return he(fe.filter((function(e){return e.id!==I.id}))),D({id:"",title:"",body:"",photo:"",created:""}),ee(!1),de(B.a[700]),ie("News Deleted Successfully"),P(!1),e.abrupt("return",re(!0));case 14:return e.prev=14,e.t0=e.catch(1),P(!1),de(R.a[700]),ie("Something went wrong"),e.abrupt("return",re(!0));case 20:e.next=23;break;case 22:return e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(j.a,null,s.a.createElement(h.a,{variant:"h6"},s.a.createElement(w.a,{edge:"start",onClick:function(){a.goBack()}},s.a.createElement(T.a,null)),"MOM News Management"),s.a.createElement("div",{style:{display:"block",marginTop:8}},s.a.createElement(O.a,{variant:"contained",color:"secondary",startIcon:s.a.createElement(A.a,null),onClick:function(){return J(!0)}},"Publish News")),s.a.createElement(x.a,{style:{marginTop:20}}),fe.length?s.a.createElement(m.a,{size:"small"},s.a.createElement(d.a,null,s.a.createElement(p.a,null,s.a.createElement(b.a,null,"Date"),s.a.createElement(b.a,null,"News Title"))),s.a.createElement(f.a,null,fe.map((function(e,t){return s.a.createElement(p.a,{hover:!0,key:t,style:{cursor:"pointer"},onClick:function(){D(Object(n.a)({},e)),ee(!0)}},s.a.createElement(b.a,null,s.a.createElement(h.a,null,z()(e.created).format("DD-MM-YYYY"))),s.a.createElement(b.a,null,s.a.createElement(h.a,null,e.title)))})))):s.a.createElement(h.a,{align:"center",variant:"h6",style:{marginTop:300}},"NO DATA TO DISPLAY!"),s.a.createElement(g.a,{fullWidth:!0,maxWidth:"xs",open:L,onClose:function(){D({id:"",title:"",body:"",photo:"",created:""}),J(!1)}},s.a.createElement(y.a,null,"Publish News"),s.a.createElement(v.a,{dividers:!0},s.a.createElement("form",{onSubmit:ye},s.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"News Title",value:I.title,onChange:function(e){return D(Object(n.a)(Object(n.a)({},I),{},{title:e.target.value}))}}),s.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"Body",multiline:!0,rows:5,value:I.body,onChange:function(e){return D(Object(n.a)(Object(n.a)({},I),{},{body:e.target.value}))}}),s.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",multiple:!1,type:"file",onChange:function(e){D(Object(n.a)(Object(n.a)({},I),{},{photo:e.target.files[0]}))}}),s.a.createElement("label",{htmlFor:"contained-button-file"},s.a.createElement(O.a,{color:"secondary",component:"span",style:{marginTop:10},startIcon:s.a.createElement(N.a,null)},"Choose Image")),I.photo&&L&&s.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},s.a.createElement("img",{alt:"Activity",src:URL.createObjectURL(I.photo),style:{width:300}})),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},s.a.createElement(O.a,{disabled:Y,type:"submit",variant:"contained",color:"primary",style:{marginRight:10}},"Submit"),s.a.createElement(O.a,{variant:"contained",onClick:function(){D({id:"",title:"",body:"",photo:"",created:""}),J(!1)}},"Cancel"))))),s.a.createElement(g.a,{fullWidth:!0,maxWidth:"xs",open:_,onClose:function(){D({id:"",title:"",body:"",photo:"",created:""}),ee(!1)}},s.a.createElement(y.a,null,"Edit News"),s.a.createElement(v.a,{dividers:!0},s.a.createElement("form",{onSubmit:ve},s.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"News Title",value:I.title,onChange:function(e){return D(Object(n.a)(Object(n.a)({},I),{},{title:e.target.value}))}}),s.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"Body",multiline:!0,rows:5,value:I.body,onChange:function(e){return D(Object(n.a)(Object(n.a)({},I),{},{body:e.target.value}))}}),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},s.a.createElement(O.a,{disabled:Y,type:"submit",variant:"contained",color:"primary",style:{marginRight:10}},"Update"),s.a.createElement(O.a,{disabled:Y,style:{marginRight:10},color:"secondary",variant:"contained",onClick:function(){if(window.confirm("Are you sure you want to delete news? You cannot recover once deleted!"))return Ee()}},"Delete"),s.a.createElement(O.a,{style:{marginRight:10},color:"secondary",variant:"contained",onClick:function(){return X(!0)}},"Image"),s.a.createElement(O.a,{variant:"contained",onClick:function(){D({id:"",title:"",body:"",photo:"",created:""}),ee(!1)}},"Cancel"))))),s.a.createElement(g.a,{scroll:"body",open:Q,onClose:function(){X(!1)}},s.a.createElement(y.a,null,"Change Image"),s.a.createElement(v.a,{dividers:!0},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("div",{style:{borderRadius:8,border:"1px solid #ddd",display:"flex",flexDirection:"column",padding:10}},s.a.createElement("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file1",multiple:!1,type:"file",onChange:function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),(a=new FormData).append("image",t.target.files[0],t.target.files[0].name),e.next=6,F.a.patch("/api/news/image/".concat(I.id),a,{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 6:return r=e.sent,D(Object(n.a)(Object(n.a)({},I),{},{photo:r.data.image})),he(fe.map((function(e){return e.id===I.id?Object(n.a)(Object(n.a)({},I),{},{photo:r.data.image}):e}))),e.abrupt("return",P(!1));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",P(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}),s.a.createElement("label",{htmlFor:"contained-button-file1"},s.a.createElement(O.a,{color:"secondary",component:"span",startIcon:s.a.createElement(N.a,null)},"Choose Image")),I.photo&&Q&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{alt:"Front",src:"".concat(H.a).concat(I.photo),style:{width:400,opacity:Y?.2:1}}),s.a.createElement("div",{hidden:!Y,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"Uploading...")))),s.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},s.a.createElement(O.a,{disabled:Y,onClick:function(){return X(!1)},variant:"contained",color:"primary"},"Close")))),s.a.createElement(C.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:ne,autoHideDuration:3e3,onClose:function(){re(!1)}},s.a.createElement(k.a,{style:{backgroundColor:me},message:oe,onClose:function(){re(!1)},action:s.a.createElement(w.a,{key:"close",color:"inherit",onClick:function(){return re(!1)}},s.a.createElement(W.a,null))})))})))}}]);
//# sourceMappingURL=23.57b347eb.chunk.js.map