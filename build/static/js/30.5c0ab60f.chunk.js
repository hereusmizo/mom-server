(this["webpackJsonpmom-admin"]=this["webpackJsonpmom-admin"]||[]).push([[30],{482:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a.n(r),c=a(35),l=a(24),o=a(0),u=a.n(o),i=a(462),s=a(463),m=a(464),p=a(465),d=a(466),f=a(70),b=a(486),g=a(401),E=a(408),h=a(404),y=a(425),O=a(426),v=a(42),j=a(428),k=a.n(j),S=a(17),w=a(427),x=a(90),C=a(89),D=a(58),Y=a(36);t.default=Object(v.b)((function(e){return{profile:e.profile}}),{logout:Y.f})(Object(S.g)((function(e){var t=e.logout,a=e.profile,r=Object(o.useState)([]),v=Object(l.a)(r,2),j=v[0],S=v[1],Y=Object(o.useState)(!1),z=Object(l.a)(Y,2),I=z[0],T=z[1],A=Object(o.useState)(null),B=Object(l.a)(A,2),H=B[0],M=B[1],J=Object(o.useState)(null),P=Object(l.a)(J,2),q=P[0],Q=P[1];Object(o.useEffect)((function(){document.title="Order History",Object.keys(a).length&&F()}),[Object.keys(a).length]);var F=function(){var e=Object(c.a)(n.a.mark((function e(){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-customer")){e.next=13;break}return e.prev=1,e.next=4,D.a.get("/api/product-order/".concat(a.id),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-customer")}});case 4:return r=e.sent,e.abrupt("return",S(r.data.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return");case 11:e.next=14;break;case 13:return e.abrupt("return",t());case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-customer")){e.next=17;break}return e.prev=1,e.next=4,D.a.delete("/api/product-order/".concat(a),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-customer")}});case 4:return S(j.filter((function(e){return e.id!==a}))),Q(x.a[700]),M("Order Deleted Successfully"),e.abrupt("return",T(!0));case 10:return e.prev=10,e.t0=e.catch(1),Q(C.a[700]),M("Something went wrong. Try again"),e.abrupt("return",T(!0));case 15:e.next=18;break;case 17:return e.abrupt("return",t());case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(E.a,{style:{marginBottom:380}},u.a.createElement(f.a,{variant:"h6"},"My Order History"),u.a.createElement(h.a,{style:{marginTop:20}}),j.length?u.a.createElement(i.a,{size:"small"},u.a.createElement(s.a,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,"Product"),u.a.createElement(p.a,{align:"center"},"QTY"),u.a.createElement(p.a,{align:"center"},"Status"),u.a.createElement(p.a,{colSpan:2},"Order Date"))),u.a.createElement(d.a,null,j.map((function(e,t){return u.a.createElement(m.a,{key:t},u.a.createElement(p.a,null,u.a.createElement(f.a,null,e.name)),u.a.createElement(p.a,{align:"center"},u.a.createElement(f.a,null,1===e.type?"-":e.quantity)),u.a.createElement(p.a,null,e.status&&u.a.createElement(f.a,{align:"center",style:{color:1===e.status?"#fe7517":(2===e.status||e.status,"#07800b")}},1===e.status?"Pending":2===e.status?"Confirmed":3===e.status?"Delivered":null)),u.a.createElement(p.a,null,u.a.createElement(f.a,null,k()(e.created).format("DD-MM-YYYY"))),u.a.createElement(p.a,null,u.a.createElement(b.a,{title:"Delete"},u.a.createElement(g.a,{disabled:1!==e.status,size:"small",onClick:function(){if(window.confirm("Are you sure you want to cancel this order? You cannot recover once cancelled!"))return G(e.id)}},"Cancel Order"))))})))):u.a.createElement(f.a,{align:"center",variant:"h6",style:{marginTop:100}},"You have no order history"),u.a.createElement(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:I,autoHideDuration:3e3,onClose:function(){T(!1)}},u.a.createElement(O.a,{style:{backgroundColor:q},message:H,onClose:function(){T(!1)},action:u.a.createElement(g.a,{key:"close",color:"inherit",onClick:function(){return T(!1)}},u.a.createElement(w.a,null))})))})))}}]);
//# sourceMappingURL=30.5c0ab60f.chunk.js.map