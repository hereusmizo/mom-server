(this["webpackJsonpmom-admin"]=this["webpackJsonpmom-admin"]||[]).push([[29],{462:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(11);t.a=Object(l.a)(r.a.createElement("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}),"AddAPhoto")},541:function(e,t,a){"use strict";a.r(t);var n=a(423),r=a(16),l=a.n(r),i=a(35),c=a(24),o=a(0),u=a.n(o),m=a(439),s=a(440),d=a(441),v=a(442),b=a(443),p=a(70),f=a(414),h=a(415),g=a(416),E=a(548),y=a(519),k=a(551),O=a(544),j=a(399),S=a(411),x=a(410),w=a(403),C=a(406),A=a(428),z=a(429),I=a(42),D=a(431),P=a.n(D),T=a(17),V=a(462),W=a(436),Y=a(523),N=a(430),H=a(90),B=a(89),F=a(58),q=a(36);t.default=Object(I.b)(null,{logout:q.f})(Object(T.g)((function(e){var t=e.logout,a=e.history,r=Object(o.useState)({id:"",title:"",active:!0,link:"",created:""}),I=Object(c.a)(r,2),D=I[0],T=I[1],q=Object(o.useState)(!1),M=Object(c.a)(q,2),R=M[0],J=M[1],U=Object(o.useState)(!1),L=Object(c.a)(U,2),G=L[0],K=L[1],Q=Object(o.useState)(!1),X=Object(c.a)(Q,2),Z=X[0],$=X[1],_=Object(o.useState)(!1),ee=Object(c.a)(_,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(null),re=Object(c.a)(ne,2),le=re[0],ie=re[1],ce=Object(o.useState)(null),oe=Object(c.a)(ce,2),ue=oe[0],me=oe[1],se=Object(o.useState)([]),de=Object(c.a)(se,2),ve=de[0],be=de[1];Object(o.useEffect)((function(){document.title="News",pe()}),[]);var pe=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/advertisement/list",{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 3:return t=e.sent,e.abrupt("return",be(t.data.data));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(i.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!localStorage.getItem("mom-admin")){e.next=28;break}return e.prev=2,J(!0),(n=new FormData).append("title",D.title),n.append("active",D.active),D.link?n.append("document",D.link,D.link.name):n.append("document",null),e.next=10,F.a.post("/api/advertisement",n,{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 10:return e.sent,pe(),T({id:"",title:"",active:!0,link:"",created:""}),me(H.a[700]),ie("Advertisement Published Successfully"),J(!1),K(!1),e.abrupt("return",ae(!0));case 20:return e.prev=20,e.t0=e.catch(2),J(!1),me(B.a[700]),ie("Something went wrong"),e.abrupt("return",ae(!0));case 26:e.next=29;break;case 28:return e.abrupt("return",t());case 29:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!localStorage.getItem("mom-admin")){e.next=24;break}return e.prev=2,J(!0),e.next=6,F.a.patch("/api/advertisement/".concat(D.id),D,{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 6:return be(ve.map((function(e){return e.id===D.id?D:e}))),T({id:"",title:"",active:!0,link:"",created:""}),$(!1),me(H.a[700]),ie("Advertisement Updated Successfully"),J(!1),e.abrupt("return",ae(!0));case 15:return e.prev=15,e.t0=e.catch(2),console.log(e.t0),J(!1),me(B.a[700]),ie("Something went wrong"),e.abrupt("return",ae(!0));case 22:e.next=25;break;case 24:return e.abrupt("return",t());case 25:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-admin")){e.next=22;break}return e.prev=1,J(!0),e.next=5,F.a.delete("/api/advertisement/".concat(D.id),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-admin")}});case 5:return be(ve.filter((function(e){return e.id!==D.id}))),T({id:"",title:"",active:!0,link:"",created:""}),$(!1),me(H.a[700]),ie("Advertisement Deleted Successfully"),J(!1),e.abrupt("return",ae(!0));case 14:return e.prev=14,e.t0=e.catch(1),J(!1),me(B.a[700]),ie("Something went wrong"),e.abrupt("return",ae(!0));case 20:e.next=23;break;case 22:return e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(x.a,null,u.a.createElement(p.a,{variant:"h6"},u.a.createElement(w.a,{edge:"start",onClick:function(){a.goBack()}},u.a.createElement(W.a,null)),"Advertisement Management"),u.a.createElement("div",{style:{display:"block",marginTop:8}},u.a.createElement(S.a,{variant:"contained",color:"secondary",startIcon:u.a.createElement(Y.a,null),onClick:function(){return K(!0)}},"Publish New Ad")),u.a.createElement(C.a,{style:{marginTop:20}}),ve.length?u.a.createElement(m.a,{size:"small"},u.a.createElement(s.a,null,u.a.createElement(d.a,null,u.a.createElement(v.a,null,"Ad Title"),u.a.createElement(v.a,{align:"center"},"Visible to Public"),u.a.createElement(v.a,null,"Date of Publish"))),u.a.createElement(b.a,null,ve.map((function(e,t){return u.a.createElement(d.a,{hover:!0,key:t,style:{cursor:"pointer"},onClick:function(){T(Object(n.a)({},e)),$(!0)}},u.a.createElement(v.a,null,u.a.createElement(p.a,null,e.title)),u.a.createElement(v.a,{align:"center"},u.a.createElement(p.a,{style:{fontWeight:500,color:e.active?"green":"red"}},e.active?"Yes":"No")),u.a.createElement(v.a,null,u.a.createElement(p.a,null,P()(e.created).format("DD-MM-YYYY"))))})))):u.a.createElement(p.a,{align:"center",variant:"h6",style:{marginTop:300}},"NO DATA TO DISPLAY!"),u.a.createElement(f.a,{fullWidth:!0,maxWidth:"xs",open:G,onClose:function(){K(!1),T({id:"",title:"",active:!0,link:"",created:""})}},u.a.createElement(h.a,null,"Publish Advertisement"),u.a.createElement(g.a,{dividers:!0},u.a.createElement("form",{onSubmit:fe},u.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"Advertisement Title",value:D.title,onChange:function(e){return T(Object(n.a)(Object(n.a)({},D),{},{title:e.target.value}))}}),u.a.createElement(y.a,{variant:"outlined",size:"small",margin:"normal",fullWidth:!0,required:!0},u.a.createElement(k.a,{id:"select-active"},"Visible to Public"),u.a.createElement(O.a,{label:"Visible to Public",labelId:"select-active",value:D.active,onChange:function(e){T(Object(n.a)(Object(n.a)({},D),{},{active:e.target.value}))}},u.a.createElement(j.a,{value:!0},"Yes"),u.a.createElement(j.a,{value:!1},"No"))),u.a.createElement("input",{style:{display:"none"},id:"contained-button-file",multiple:!1,type:"file",onChange:function(e){T(Object(n.a)(Object(n.a)({},D),{},{link:e.target.files[0]}))}}),u.a.createElement("label",{htmlFor:"contained-button-file"},u.a.createElement(S.a,{color:"secondary",component:"span",style:{marginTop:10},startIcon:u.a.createElement(V.a,null)},"Choose File")),u.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",fontWeight:500,color:D.link?"green":"red"}},D.link?"File Selected":"No File Selected"),u.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:20}},u.a.createElement(S.a,{disabled:R,type:"submit",variant:"contained",color:"primary",style:{marginRight:10}},"Submit"),u.a.createElement(S.a,{variant:"contained",onClick:function(){K(!1),T({id:"",title:"",active:!0,link:"",created:""})}},"Cancel"))))),u.a.createElement(f.a,{fullWidth:!0,maxWidth:"xs",open:Z,onClose:function(){$(!1),T({id:"",title:"",active:!0,link:"",created:""})}},u.a.createElement(h.a,null,"Edit Advertisement"),u.a.createElement(g.a,{dividers:!0},u.a.createElement("form",{onSubmit:he},u.a.createElement(E.a,{required:!0,fullWidth:!0,variant:"outlined",margin:"normal",size:"small",label:"Advertisement Title",value:D.title,onChange:function(e){return T(Object(n.a)(Object(n.a)({},D),{},{title:e.target.value}))}}),u.a.createElement(y.a,{variant:"outlined",size:"small",margin:"normal",fullWidth:!0,required:!0},u.a.createElement(k.a,{id:"select-active"},"Visible to Public"),u.a.createElement(O.a,{label:"Visible to Public",labelId:"select-active",value:D.active,onChange:function(e){T(Object(n.a)(Object(n.a)({},D),{},{active:e.target.value}))}},u.a.createElement(j.a,{value:!0},"Yes"),u.a.createElement(j.a,{value:!1},"No"))),u.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},u.a.createElement(S.a,{disabled:R,type:"submit",variant:"contained",color:"primary",style:{marginRight:10}},"Update"),u.a.createElement(S.a,{disabled:R,style:{marginRight:10},color:"secondary",variant:"contained",onClick:function(){if(window.confirm("Are you sure you want to delete advertisement? You cannot recover once deleted!"))return ge()}},"Delete"),u.a.createElement(S.a,{variant:"contained",onClick:function(){$(!1),T({id:"",title:"",active:!0,link:"",created:""})}},"Cancel"))))),u.a.createElement(A.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:te,autoHideDuration:3e3,onClose:function(){ae(!1)}},u.a.createElement(z.a,{style:{backgroundColor:ue},message:le,onClose:function(){ae(!1)},action:u.a.createElement(w.a,{key:"close",color:"inherit",onClick:function(){return ae(!1)}},u.a.createElement(N.a,null))})))})))}}]);
//# sourceMappingURL=29.939a1557.chunk.js.map