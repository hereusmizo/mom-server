{"version":3,"sources":["../node_modules/@material-ui/icons/esm/ArrowBack.js","pages/cms/Settings.js"],"names":["createSvgIcon","React","createElement","d","connect","state","decoded","withRouter","history","useState","profile","setprofile","dialog","setdialog","dialogpassword","setdialogpassword","name","phone","email","type","formvalues","setformvalues","old","new","confirm","password","setpassword","useEffect","fetchprofile","a","localStorage","getItem","api","get","id","headers","Authorization","response","data","submitchange","e","preventDefault","patch","alert","submitpassword","Object","keys","length","variant","edge","onClick","goBack","style","display","alignItems","flexDirection","flexGrow","marginTop","align","fontSize","fontWeight","color","fullWidth","maxWidth","open","onClose","onSubmit","autoFocus","required","label","margin","size","value","onChange","target","marginBottom"],"mappings":"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","file":"static/js/26.81e8b6c6.chunk.js","sourcesContent":["import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n}), 'ArrowBack');","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  TextField,\r\n  Button,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport api from \"../../api/api\";\r\n\r\nconst Settings = ({ history, decoded }) => {\r\n  const [profile, setprofile] = useState({});\r\n  const [dialog, setdialog] = useState(false);\r\n  const [dialogpassword, setdialogpassword] = useState(false);\r\n  const [formvalues, setformvalues] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    type: \"\",\r\n  });\r\n  const [password, setpassword] = useState({\r\n    old: \"\",\r\n    new: \"\",\r\n    confirm: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchprofile();\r\n  }, []);\r\n\r\n  const fetchprofile = async () => {\r\n    if (localStorage.getItem(\"mom-admin\")) {\r\n      try {\r\n        const response = await api.get(`/api/admin/${decoded.id}`, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"mom-admin\"),\r\n          },\r\n        });\r\n        setprofile(response.data.data);\r\n      } catch (err) {\r\n        return setprofile({});\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitchange = async (e) => {\r\n    e.preventDefault();\r\n    if (localStorage.getItem(\"mom-admin\")) {\r\n      try {\r\n        await api.patch(`/api/admin/${decoded.id}`, formvalues, {\r\n          headers: {\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"mom-admin\"),\r\n          },\r\n        });\r\n        fetchprofile();\r\n        setformvalues({ name: \"\", phone: \"\", email: \"\", type: \"\" });\r\n        return setdialog(false);\r\n      } catch (err) {\r\n        return alert(\"Something went wrong\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitpassword = async (e) => {\r\n    e.preventDefault();\r\n    if (password.new === password.confirm) {\r\n      if (localStorage.getItem(\"mom-admin\")) {\r\n        try {\r\n          await api.patch(`/api/admin/password/${decoded.id}`, password, {\r\n            headers: {\r\n              Authorization: \"Bearer \" + localStorage.getItem(\"mom-admin\"),\r\n            },\r\n          });\r\n          setpassword({\r\n            old: \"\",\r\n            new: \"\",\r\n            confirm: \"\",\r\n          });\r\n          return setdialogpassword(false);\r\n        } catch (err) {\r\n          return alert(\"Something went wrong\");\r\n        }\r\n      }\r\n    } else {\r\n      return alert(\"Confirm password must be same as new password went wrong\");\r\n    }\r\n  };\r\n  if (Object.keys(profile).length) {\r\n    return (\r\n      <Container>\r\n        <Typography variant=\"h6\">\r\n          <IconButton\r\n            edge=\"start\"\r\n            onClick={() => {\r\n              history.goBack();\r\n            }}\r\n          >\r\n            <ArrowBack />\r\n          </IconButton>\r\n          Account Settings\r\n        </Typography>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              flexGrow: 1,\r\n              marginTop: 10,\r\n            }}\r\n          >\r\n            <Typography\r\n              align=\"center\"\r\n              style={{ fontSize: 18, fontWeight: 600 }}\r\n            >\r\n              {profile.name}\r\n            </Typography>\r\n\r\n            <Typography align=\"center\" style={{ fontWeight: 400 }}>\r\n              Phone: {profile.phone}\r\n            </Typography>\r\n            <Typography align=\"center\" style={{ fontWeight: 400 }}>\r\n              Email: {profile.email}\r\n            </Typography>\r\n            <Button\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                setformvalues(profile);\r\n                setdialog(true);\r\n              }}\r\n            >\r\n              Edit Profile\r\n            </Button>\r\n            <Button color=\"secondary\" onClick={setdialogpassword}>\r\n              Change Password\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Dialog\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n          open={dialog}\r\n          onClose={() => {\r\n            setformvalues({ name: \"\", phone: \"\", email: \"\", type: \"\" });\r\n            setdialog(false);\r\n          }}\r\n        >\r\n          <DialogTitle>Edit My Profile</DialogTitle>\r\n          <DialogContent>\r\n            <form onSubmit={submitchange}>\r\n              <TextField\r\n                autoFocus\r\n                required\r\n                label=\"Name\"\r\n                margin=\"dense\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.name}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, name: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                type=\"phone\"\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Phone\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.phone}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, phone: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                type=\"email\"\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Email\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.email}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, email: e.target.value })\r\n                }\r\n              />\r\n              <Button\r\n                style={{ marginTop: 20 }}\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setformvalues({ name: \"\", phone: \"\", email: \"\", type: \"\" });\r\n                  setdialog(false);\r\n                }}\r\n                style={{ marginTop: 10, marginBottom: 20 }}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n        <Dialog\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n          open={dialogpassword}\r\n          onClose={() => {\r\n            setpassword({\r\n              old: \"\",\r\n              new: \"\",\r\n              confirm: \"\",\r\n            });\r\n            setdialogpassword(false);\r\n          }}\r\n        >\r\n          <DialogTitle>Change Password</DialogTitle>\r\n          <DialogContent>\r\n            <form onSubmit={submitpassword}>\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                autoFocus\r\n                label=\"Old Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.old}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, old: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                label=\"New Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.new}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, new: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Confirm Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.confirm}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, confirm: e.target.value })\r\n                }\r\n              />\r\n              <Button\r\n                style={{ marginTop: 20 }}\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setpassword({\r\n                    old: \"\",\r\n                    new: \"\",\r\n                    confirm: \"\",\r\n                  });\r\n                  setdialogpassword(false);\r\n                }}\r\n                style={{ marginTop: 10, marginBottom: 20 }}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </Container>\r\n    );\r\n  } else {\r\n    return (\r\n      <div\r\n        style={{\r\n          marginTop: 400,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapstatetoprops = (state) => {\r\n  return { decoded: state.decoded };\r\n};\r\nexport default connect(mapstatetoprops, null)(withRouter(Settings));\r\n"],"sourceRoot":""}