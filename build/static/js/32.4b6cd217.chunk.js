(this["webpackJsonpmom-admin"]=this["webpackJsonpmom-admin"]||[]).push([[32],{482:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a.n(r),c=a(35),o=a(24),l=a(0),u=a.n(l),i=a(462),m=a(463),s=a(464),p=a(465),f=a(466),d=a(70),b=a(487),g=a(401),E=a(408),h=a(404),y=a(424),O=a(425),v=a(42),j=a(428),k=a.n(j),w=a(17),S=a(483),x=a(427),Y=a(90),D=a(89),C=a(58),z=a(36);t.default=Object(v.b)((function(e){return{profile:e.profile}}),{logout:z.f})(Object(w.g)((function(e){var t=e.logout,a=e.profile,r=Object(l.useState)([]),v=Object(o.a)(r,2),j=v[0],w=v[1],z=Object(l.useState)(!1),I=Object(o.a)(z,2),T=I[0],A=I[1],B=Object(l.useState)(null),H=Object(o.a)(B,2),M=H[0],J=H[1],q=Object(l.useState)(null),P=Object(o.a)(q,2),Q=P[0],F=P[1];Object(l.useEffect)((function(){document.title="Order History",Object.keys(a).length&&G()}),[Object.keys(a).length]);var G=function(){var e=Object(c.a)(n.a.mark((function e(){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-customer")){e.next=13;break}return e.prev=1,e.next=4,C.a.get("/api/product-order/".concat(a.id),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-customer")}});case 4:return r=e.sent,e.abrupt("return",w(r.data.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return");case 11:e.next=14;break;case 13:return e.abrupt("return",t());case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("mom-customer")){e.next=17;break}return e.prev=1,e.next=4,C.a.delete("/api/product-order/".concat(a),{headers:{Authorization:"Bearer "+localStorage.getItem("mom-customer")}});case 4:return w(j.filter((function(e){return e.id!==a}))),F(Y.a[700]),J("Order Deleted Successfully"),e.abrupt("return",A(!0));case 10:return e.prev=10,e.t0=e.catch(1),F(D.a[700]),J("Something went wrong. Try again"),e.abrupt("return",A(!0));case 15:e.next=18;break;case 17:return e.abrupt("return",t());case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(E.a,{style:{marginBottom:380}},u.a.createElement(d.a,{variant:"h6"},"My Order History"),u.a.createElement(h.a,{style:{marginTop:20}}),j.length?u.a.createElement(i.a,{size:"small"},u.a.createElement(m.a,null,u.a.createElement(s.a,null,u.a.createElement(p.a,null,"Product"),u.a.createElement(p.a,{align:"center"},"QTY"),u.a.createElement(p.a,{colSpan:2},"Order Date"))),u.a.createElement(f.a,null,j.map((function(e,t){return u.a.createElement(s.a,{key:t},u.a.createElement(p.a,null,u.a.createElement(d.a,null,e.productname)),u.a.createElement(p.a,{align:"center"},u.a.createElement(d.a,null,1===e.type?"-":e.quantity)),u.a.createElement(p.a,null,u.a.createElement(d.a,null,k()(e.created).format("DD-MM-YYYY"))),u.a.createElement(p.a,null,u.a.createElement(b.a,{title:"Delete"},u.a.createElement(g.a,{onClick:function(){if(window.confirm("Are you sure you want to delete this order? You cannot recover once deleted!"))return K(e.id)}},u.a.createElement(S.a,{color:"primary"})))))})))):u.a.createElement(d.a,{align:"center",variant:"h6",style:{marginTop:100}},"You have no order history"),u.a.createElement(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:T,autoHideDuration:3e3,onClose:function(){A(!1)}},u.a.createElement(O.a,{style:{backgroundColor:Q},message:M,onClose:function(){A(!1)},action:u.a.createElement(g.a,{key:"close",color:"inherit",onClick:function(){return A(!1)}},u.a.createElement(x.a,null))})))})))}}]);
//# sourceMappingURL=32.4b6cd217.chunk.js.map