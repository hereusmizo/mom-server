{"version":3,"sources":["pages/Profile.js"],"names":["connect","state","profile","fetchProfile","useState","dialog","setdialog","dialogpassword","setdialogpassword","name","phone","email","address","formvalues","setformvalues","oldpassword","newpassword","confirm","password","setpassword","useEffect","document","title","submitchange","e","a","preventDefault","localStorage","getItem","api","patch","id","headers","Authorization","alert","submitpassword","Object","keys","length","maxWidth","style","marginBottom","variant","display","alignItems","flexDirection","border","padding","marginTop","borderRadius","fullWidth","margin","color","onClick","flexGrow","fontWeight","fontSize","open","onClose","onSubmit","autoFocus","required","label","size","value","onChange","target","type"],"mappings":"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","file":"static/js/32.8afb4081.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  TextField,\r\n  Button,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport api from \"../api/api\";\r\nimport { fetchProfile } from \"../actions\";\r\n\r\nconst Profile = ({ profile, fetchProfile }) => {\r\n  const [dialog, setdialog] = useState(false);\r\n  const [dialogpassword, setdialogpassword] = useState(false);\r\n  const [formvalues, setformvalues] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    address: \"\",\r\n  });\r\n  const [password, setpassword] = useState({\r\n    oldpassword: \"\",\r\n    newpassword: \"\",\r\n    confirm: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.title = \"My Profile\";\r\n  }, []);\r\n\r\n  const submitchange = async (e) => {\r\n    e.preventDefault();\r\n    if (localStorage.getItem(\"mom-customer\")) {\r\n      try {\r\n        await api.patch(`/api/customer/self/${profile.id}`, formvalues, {\r\n          headers: {\r\n            Authorization:\r\n              \"Bearer \" + localStorage.getItem(\"mom-customer\"),\r\n          },\r\n        });\r\n        fetchProfile();\r\n        setformvalues({ name: \"\", phone: \"\", email: \"\", address: \"\" });\r\n        return setdialog(false);\r\n      } catch (err) {\r\n        return alert(\"Something went wrong\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitpassword = async (e) => {\r\n    e.preventDefault();\r\n    if (password.newpassword === password.confirm) {\r\n      if (localStorage.getItem(\"mom-customer\")) {\r\n        try {\r\n          await api.patch(`/api/customer/password/${profile.id}`, password, {\r\n            headers: {\r\n              Authorization:\r\n                \"Bearer \" + localStorage.getItem(\"mom-customer\"),\r\n            },\r\n          });\r\n          setpassword({\r\n            oldpassword: \"\",\r\n            newpassword: \"\",\r\n            confirm: \"\",\r\n          });\r\n          return setdialogpassword(false);\r\n        } catch (err) {\r\n          return alert(\"Something went wrong\");\r\n        }\r\n      }\r\n    } else {\r\n      return alert(\"Confirm password must be same as new password went wrong\");\r\n    }\r\n  };\r\n  if (Object.keys(profile).length) {\r\n    return (\r\n      <Container maxWidth=\"xs\" style={{ marginBottom: 380 }}>\r\n        <Typography variant=\"h6\">Account Settings</Typography>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            flexDirection: \"column\",\r\n            border: \"1px solid #eee\",\r\n            padding: 20,\r\n            marginTop: 30,\r\n            borderRadius: 8,\r\n          }}\r\n        >\r\n          <Button\r\n            fullWidth\r\n            style={{ margin: 5, borderRadius: 20 }}\r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            onClick={() => {\r\n              setformvalues(profile);\r\n              setdialog(true);\r\n            }}\r\n          >\r\n            Edit Profile\r\n          </Button>\r\n          <Button\r\n            fullWidth\r\n            style={{ margin: 5, borderRadius: 20 }}\r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            onClick={setdialogpassword}\r\n          >\r\n            Change Password\r\n          </Button>\r\n          <div\r\n            style={{\r\n              flexGrow: 1,\r\n              marginTop: 10,\r\n            }}\r\n          >\r\n            <Typography style={{ fontWeight: 300, fontSize: 11 }}>\r\n              NAME\r\n            </Typography>\r\n            <Typography style={{ fontWeight: 600 }}>{profile.name}</Typography>\r\n            <Typography\r\n              style={{ fontWeight: 300, fontSize: 11, marginTop: 10 }}\r\n            >\r\n              PHONE\r\n            </Typography>\r\n            <Typography style={{ fontWeight: 600 }}>{profile.phone}</Typography>\r\n            <Typography\r\n              style={{ fontWeight: 300, fontSize: 11, marginTop: 10 }}\r\n            >\r\n              EMAIL\r\n            </Typography>\r\n            <Typography style={{ fontWeight: 600 }}>{profile.email}</Typography>\r\n            <Typography\r\n              style={{ fontWeight: 300, fontSize: 11, marginTop: 10 }}\r\n            >\r\n              ADDRESS:\r\n            </Typography>\r\n            <Typography style={{ fontWeight: 600, marginBottom: 10 }}>\r\n              {profile.address}\r\n            </Typography>\r\n          </div>\r\n        </div>\r\n        <Dialog\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n          open={dialog}\r\n          onClose={() => {\r\n            setformvalues({ name: \"\", phone: \"\", email: \"\", address: \"\" });\r\n            setdialog(false);\r\n          }}\r\n        >\r\n          <DialogTitle>Edit My Profile</DialogTitle>\r\n          <DialogContent>\r\n            <form onSubmit={submitchange}>\r\n              <TextField\r\n                autoFocus\r\n                required\r\n                label=\"Name\"\r\n                margin=\"dense\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.name}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, name: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                type=\"phone\"\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Phone\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.phone}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, phone: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                type=\"email\"\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Email\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.email}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, email: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Address\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formvalues.address}\r\n                onChange={(e) =>\r\n                  setformvalues({ ...formvalues, address: e.target.value })\r\n                }\r\n              />\r\n              <Button\r\n                style={{ marginTop: 20 }}\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setformvalues({\r\n                    name: \"\",\r\n                    phone: \"\",\r\n                    email: \"\",\r\n                    address: \"\",\r\n                  });\r\n                  setdialog(false);\r\n                }}\r\n                style={{ marginTop: 10, marginBottom: 20 }}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n        <Dialog\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n          open={dialogpassword}\r\n          onClose={() => {\r\n            setpassword({\r\n              oldpassword: \"\",\r\n              newpassword: \"\",\r\n              confirm: \"\",\r\n            });\r\n            setdialogpassword(false);\r\n          }}\r\n        >\r\n          <DialogTitle>Change Password</DialogTitle>\r\n          <DialogContent>\r\n            <form onSubmit={submitpassword}>\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                autoFocus\r\n                label=\"Old Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.oldpassword}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, oldpassword: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                label=\"New Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.newpassword}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, newpassword: e.target.value })\r\n                }\r\n              />\r\n              <TextField\r\n                required\r\n                margin=\"dense\"\r\n                label=\"Confirm Password\"\r\n                fullWidth\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={password.confirm}\r\n                onChange={(e) =>\r\n                  setpassword({ ...password, confirm: e.target.value })\r\n                }\r\n              />\r\n              <Button\r\n                style={{ marginTop: 20 }}\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setpassword({\r\n                    oldpassword: \"\",\r\n                    newpassword: \"\",\r\n                    confirm: \"\",\r\n                  });\r\n                  setdialogpassword(false);\r\n                }}\r\n                style={{ marginTop: 10, marginBottom: 20 }}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                fullWidth\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </Container>\r\n    );\r\n  } else {\r\n    return (\r\n      <div\r\n        style={{\r\n          marginTop: 400,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapstatetoprops = (state) => {\r\n  return { profile: state.profile };\r\n};\r\nexport default connect(mapstatetoprops, { fetchProfile })(Profile);\r\n"],"sourceRoot":""}